// button.component.scss
@use '../../scss/core/mixins' as mixins;

.nova-button {
  // Core button styles
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  font-family: var(--nova-font-family-display);
  font-weight: 500;
  font-size: 0.9375rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  z-index: 1;
  
  // Focus state
  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--nova-background), 0 0 0 4px rgba(var(--nova-primary-rgb), 0.5);
  }
  
  // Primary button - "Stellar" style
  &--primary {
    background-color: var(--nova-primary);
    color: var(--nova-background);
    box-shadow: 
      inset 0 1px 0 rgba(255, 255, 255, 0.15),
      0 2px 6px rgba(var(--nova-primary-rgb), 0.3);
    
    // Star glow effect
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, 
        rgba(255, 255, 255, 0.12), 
        rgba(255, 255, 255, 0)
      );
      z-index: -1;
    }
    
    // Subtle star particles
    &::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.3) 0.5px, transparent 0.6px),
        radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.2) 0.2px, transparent 0.3px),
        radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.2) 0.3px, transparent 0.4px);
      background-size: 120px 120px;
      opacity: 0;
      z-index: -1;
      transition: opacity 0.3s ease;
    }
    
    &:hover:not(.nova-button--disabled) {
      background-color: lighten(#4B7BFF, 5%); // Hardcoded primary color with slight lightening
      transform: translateY(-1px);
      box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 4px 10px rgba(var(--nova-primary-rgb), 0.4);
      
      &::after {
        opacity: 1;
      }
    }
    
    &:active:not(.nova-button--disabled) {
      transform: translateY(1px);
      box-shadow: 
        inset 0 1px 2px rgba(0, 0, 0, 0.1),
        0 2px 4px rgba(var(--nova-primary-rgb), 0.2);
    }
  }
  
  // CTA button - "Nova" style
  &--cta {
    background: linear-gradient(135deg, #FF3D51, #FF6D2E); // Hardcoded supernova colors
    color: var(--nova-background);
    font-weight: 600;
    letter-spacing: 0.01em;
    box-shadow: 
      0 4px 12px rgba(255, 61, 81, 0.3), // Using hardcoded primary supernova color
      0 0 0 1px rgba(255, 61, 81, 0.4);
    
    // Shine effect
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        135deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
      );
      opacity: 0;
      z-index: -1;
      transition: opacity 0.3s ease;
    }
    
    &:hover:not(.nova-button--disabled) {
      transform: translateY(-2px);
      box-shadow: 
        0 8px 16px rgba(255, 61, 81, 0.4),
        0 0 0 1px rgba(255, 61, 81, 0.5);
      
      &::before {
        opacity: 1;
        animation: cta-shine 1.5s infinite;
      }
    }
    
    &:active:not(.nova-button--disabled) {
      transform: translateY(1px);
      box-shadow: 
        0 2px 6px rgba(255, 61, 81, 0.3),
        0 0 0 1px rgba(255, 61, 81, 0.5);
    }
  }
  
  // Secondary button - "Eclipse" style
  &--secondary {
    background-color: transparent;
    color: var(--nova-secondary);
    border: 1px solid rgba(var(--nova-secondary-rgb), 0.3);
    box-shadow: 
      inset 0 1px 0 rgba(255, 255, 255, 0.05),
      0 1px 3px rgba(0, 0, 0, 0.05);
    
    // Eclipse glow
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      box-shadow: inset 0 0 0 1px rgba(var(--nova-secondary-rgb), 0.1);
      opacity: 0;
      z-index: -1;
      transition: opacity 0.3s ease;
    }
    
    &:hover:not(.nova-button--disabled) {
      background-color: rgba(var(--nova-secondary-rgb), 0.05);
      border-color: rgba(var(--nova-secondary-rgb), 0.5);
      transform: translateY(-1px);
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 3px 6px rgba(0, 0, 0, 0.1);
      
      &::before {
        opacity: 1;
        animation: eclipse-pulse 2s infinite alternate;
      }
    }
    
    &:active:not(.nova-button--disabled) {
      transform: translateY(1px);
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
      background-color: rgba(var(--nova-secondary-rgb), 0.1);
    }
  }
  
  // Text button - "Cosmic Ray" style
  &--text {
    background-color: transparent;
    color: var(--nova-primary);
    padding: 0.5rem 0.75rem;
    box-shadow: none;
    
    // Underline effect
    &::before {
      content: '';
      position: absolute;
      left: 0.5rem;
      right: 0.5rem;
      bottom: 0.25rem;
      height: 1px;
      background: var(--nova-primary);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
      z-index: -1;
    }
    
    &:hover:not(.nova-button--disabled) {
      background-color: rgba(var(--nova-primary-rgb), 0.05);
      
      &::before {
        transform: scaleX(1);
      }
    }
    
    &:active:not(.nova-button--disabled) {
      background-color: rgba(var(--nova-primary-rgb), 0.1);
    }
  }
  
  // Size variations
  &--small {
    padding: 0.375rem 0.75rem;
    font-size: 0.8125rem;
    min-height: 1.875rem;
  }
  
  &--medium {
    padding: 0.625rem 1.25rem;
    font-size: 0.9375rem;
    min-height: 2.25rem;
  }
  
  &--large {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    min-height: 2.75rem;
    font-weight: 600;
  }
  
  // Disabled state
  &--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none !important;
    transform: none !important;
    pointer-events: none;
  }
  
  // Loading state
  &--loading {
    cursor: wait;
    pointer-events: none;
    
    .nova-button__content {
      opacity: 0;
    }
  }
  
  // Component parts
  &__loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    
    &-ring {
      width: 1.25rem;
      height: 1.25rem;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.15);
      border-top-color: currentColor;
      animation: spinner-rotate 0.8s linear infinite;
    }
  }
  
  &__content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    z-index: 1;
    transition: opacity 0.2s ease;
  }
  
  &__icon-left, &__icon-right {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
}

// Animations
@keyframes spinner-rotate {
  to { transform: rotate(360deg); }
}

@keyframes cta-shine {
  0% { 
    opacity: 0.5;
    transform: translateX(-100%) skewX(-15deg);
  }
  100% { 
    opacity: 0;
    transform: translateX(200%) skewX(-15deg); 
  }
}

@keyframes eclipse-pulse {
  0% { opacity: 0.7; }
  100% { opacity: 1; }
}